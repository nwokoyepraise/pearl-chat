<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pearl Chat | Your Best Minimalist Chat App</title>
    <link rel="stylesheet" href="/public/css/intro.css">
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Nunito" />
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <script src="/public/js/insta_chat/intro_button.js"></script>
    <script src="https://unpkg.com/uuid@latest/dist/umd/uuidv4.min.js"></script>
    <script src="https://cdn.rawgit.com/davidshimjs/qrcodejs/gh-pages/qrcode.min.js"></script>

</head>

<body>
    <div class="body-overlay" id="body-overlay"></div>

    <header>
        <object class="header-nav" data="/public/html/header_nav.html" type=""></object>
    </header>

    <main>
        <div class="new-meeting-modal" id="new-meeting-modal">
            <div class="modal-content">
                <span class="close">&times;</span>
                <div class="qrcode-container">
                    <div id="qrcode"></div>
                </div>

                <h1>Chat link ready</h1>
                <h3>Copy and share the chat link below to start</h3>

                <h4 id="chat-link"></h4>
                <div class="copy-link-container">
                    <span class="material-icons">copy_all</span>
                    <h4 id="copy-link">Copy chat link</h3>
                </div>
            </div>

        </div>

        <div class="div-left">
            <div class="text">
                <h1>Premium chats. <br>Nothing to download.</h1>
                <h3>We bring to you InstaChat, start chatting right away securely with our state-of-the-art encryption
                    technology. No need to register. No need to share personal information.</h3>
            </div>

            <!-- onclick=new_meeting(uuidv4()) -->
            <div class="buttons">
                <button id="new-meeting" class="new-meeting">+ New Meeting</button>
                <button class="join" onclick="join()">Join</button>
            </div>
            <hr>
        </div>


        <div class="div-right">
            <div class="img">
                <img class="illus1" src="/public/img/intro_illus1.svg" alt="">
                <img class="illus2" src="/public/img/intro_illus2.svg" alt="">
            </div>

            <div class="illus-text">
                <div class="text1">
                    <h1>Start chatting</h1>
                    <h3>Quickly get a link to start chatting without sharing personal info</h3>
                </div>

                <div class="text2">
                    <h1>Secure Communication</h1>
                    <h3>Chat with encryption. Chats expire at the end of each session.</h3>
                </div>
            </div>

            <div class="illus-dots">
                <div class="dot1"></div>
                <div class="dot2"></div>
            </div>
        </div>

        <script>
            window.addEventListener('load', function () {
                var div = document.querySelector('.div-right div.img');
                var dot = document.querySelector('.illus-dots');
                var div_text = document.querySelector('div.illus-text');

                var img_rect = document.querySelector('.div-right div img').getBoundingClientRect();
                var illus_text_rect = document.querySelector('div.illus-text .text1').getBoundingClientRect();

                div.style.height = img_rect.height + 'px';
                div.style.width = img_rect.width + 'px';

                div_text.style.height = illus_text_rect.height + 'px';
                div_text.style.width = illus_text_rect.width + 'px'
            });
        </script>

        <script type="text/javascript">
            document.getElementById('new-meeting').onclick = function () {
                let uuid = uuidv4();
                new QRCode(document.getElementById("qrcode"), {
                    text: uuid,
                    width: 120,
                    height: 120,
                    colorDark: '#ffffff',
                    colorLight: "#10283f",
                    correctLevel: QRCode.CorrectLevel.H
                });
                document.getElementById("body-overlay").style.display = "block";
                document.getElementById('new-meeting-modal').style.display = "block";
                document.getElementById('chat-link').innerText = uuid;
            }

        </script>

        <!-- <div id="qrcode-2"></div>
        <script type="text/javascript">
            var qrcode = new QRCode(document.getElementById("qrcode-2"), {
                text: "https://webisora.com",
                width: 128,
                height: 128,
                colorDark: "#5868bf",
                colorLight: "#ffffff",
                correctLevel: QRCode.CorrectLevel.H
            });
        </script> -->
    </main>
    <footer class="footer">
        <object class="footer" data="/public/html/footer.html" type="text/html"></object>
    </footer>
</body>

</html>