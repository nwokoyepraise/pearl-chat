<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pearl Chat | Your Best Minimalist Chat App</title>
    <link rel="stylesheet" href="/public/css/chat.css">
    <link
        href="https://fonts.googleapis.com/icon?family=Material+Icons|Material+Icons+Outlined|Material+Icons+Two+Tone|Material+Icons+Round|Material+Icons+Sharp"
        rel="stylesheet">
</head>

<body>
    <main>
        <section id="nav-section" class="nav-section">
            <div class="logo"><img src="/public/img/logo.png" alt="" class="img-logo"></div>
            <div class="container-profile">
                <div class="div-profile">
                    <img class="profile-pic" src="../img/ninja_512.webp" alt="">
                    <h3 class="profile-name">Bill Bradford</h3>

                    <div class="div-switch">
                        <label class="switch">
                            <input id="input-slider" type="checkbox">
                            <span class="slider round"></span>
                        </label>
                        <span id="active-away" class="active-away">Away</span>
                    </div>

                </div>
            </div>

            <div class="div-active-conv">
                <div class="div-header">
                    <h4>Active Chats</h4>
                    <div class="div-conv-count">
                        <h5 id="msg-count">1</h5>
                    </div>
                    <span id="expand-icon" class="material-icons-outlined">
                        expand_more
                    </span>
                </div>
                <div id="msgs-list" class="div-msgs-list">
                    <div id="div-msg" class="div-msg">
                        <span id="msg-icon" class="message-icon">
                            <h4 id="msg-name-tag">JD</h4>
                        </span>
                        <h4 id="msg-name">John Doe</h4>
                    </div>
                </div>

            </div>


            <div id="div-settings" class="div-settings">
                <div>
                    <span class="material-icons">
                        account_circle
                    </span>
                    <h4>Profile</h4>
                </div>
                <div>
                    <span class="material-icons">
                        settings
                    </span>
                    <h4>Settings</h4>
                </div>
                <div>
                    <span class="material-icons">
                        logout
                    </span>
                    <h4>Log Out</h4>
                </div>
        </section>

        <section id="msg-section" class="msg-section">
            <div class="div-msg-section">
                <ul id="messages"></ul>
                <div class="div-form">
                    <form id="form" action="">
                        <input placeholder="Enter your message here" type="text" name="" id="input">
                        <div id="send">
                            <button>Send</button>
                            <span id="mio-send" class="material-icons-outlined">
                                send
                            </span>
                        </div>
                    </form>
                </div>


            </div>
        </section>

        <section class="user-section">
            <div class="div-user-section">

            </div>
        </section>
    </main>

    <script>
        let inputSlider = document.getElementById('input-slider');
        let activeAway = document.getElementById('active-away');
        let expandIcon = document.getElementById('expand-icon');
        let msgsList = document.getElementById('msgs-list');
        let msg = document.getElementById('div-msg');
        let fragment = document.createDocumentFragment();
        let msgIcon = document.getElementById('msg-icon');
        let msgNameTag = document.getElementById('msg-name-tag');
        let msgName = document.getElementById('msg-name');
        let msgCount = document.getElementById('msg-count');
        let msgSection = document.getElementById('msg-section');
        let btnSend = document.getElementById('send');
        let input = document.getElementById('input');
        let form = document.getElementById('form');
        let messages = document.getElementById('messages');
        let senderMsg = document.getElementById('sender-msg');

        window.addEventListener('load', function () {
            // let navSection = document.getElementById('nav-section');
            // navSection.style.height = screen.height + 'px';
            let mColors = ['#fe95ca', '#deba31', '#998afe', '#649ef3'];
            let mNames = ['Henry Boyd', 'Martha Curtis', 'Chukwu Nweze', 'Louis Ezeka'];
            let nameTag = ['HB', 'MC', 'CN', 'LE'];

            for (let i = 0; i < 4; i++) {
                let item = msg.cloneNode(true);
                msgIcon.style.backgroundColor = mColors[i]
                msgNameTag.textContent = nameTag[i];
                msgName.textContent = mNames[i];
                fragment.appendChild(item);
            }

            msgsList.appendChild(fragment);
            msgCount.textContent = msgsList.childElementCount;

        });


        inputSlider.addEventListener('change', function () {
            if (this.checked) {
                setTimeout(function () {
                    activeAway.innerHTML = 'Active';
                }, 400)
            }
            else {
                setTimeout(function () {
                    activeAway.innerHTML = 'Away';
                }, 400)

            }
        });

        expandIcon.onclick = function () {
            expandIcon.innerText = (expandIcon.innerText == 'expand_more') ? 'expand_less' : 'expand_more';
            msgsList.style.display = (expandIcon.innerText == 'expand_more') ? 'block' : 'none';
            if (expandIcon.innerText == 'expand_less') {
                document.getElementById('div-settings').style.position = 'absolute';
                document.getElementById('div-settings').style.bottom = 10 + 'px';
            }
            else { document.getElementById('div-settings').style.position = 'relative'; }
        }

        form.addEventListener('submit', function (ev) {
            ev.preventDefault();
        });

        btnSend.onclick = function () {
            let item = document.createElement('li');
            let divMsg = document.createElement('div');
            divMsg.className = 'sender-msg'
            divMsg.textContent = input.value
            //item.textContent = input.value;
            item.appendChild(divMsg);
            messages.appendChild(item);
            window.scrollTo(0, document.body.scrollHeight);
        }
    </script>
</body>

</html>